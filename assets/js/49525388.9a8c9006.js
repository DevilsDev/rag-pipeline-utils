"use strict";(self.webpackChunk_devilsdev_rag_pipeline_utils_docs=self.webpackChunk_devilsdev_rag_pipeline_utils_docs||[]).push([[7735],{5823:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"Architecture","title":"Architecture","description":"This comprehensive guide outlines the internal architecture of @DevilsDev/rag-pipeline-utils, emphasizing enterprise-grade modularity, plugin design patterns, and SOLID-compliant structure. Understanding this architecture is crucial for extending the system, creating custom plugins, and optimizing performance.","source":"@site/docs/Architecture.md","sourceDirName":".","slug":"/Architecture","permalink":"/rag-pipeline-utils/docs/Architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/DevilsDev/rag-pipeline-utils/edit/develop/docs-site/docs/Architecture.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/rag-pipeline-utils/docs/Introduction"},"next":{"title":"Tutorials","permalink":"/rag-pipeline-utils/docs/Tutorials"}}');var i=r(4848),s=r(8453);const a={},o="Architecture",c={},l=[{value:"\ud83c\udfd7\ufe0f Core Design Philosophy",id:"\ufe0f-core-design-philosophy",level:2},{value:"<strong>SOLID Principles Implementation</strong>",id:"solid-principles-implementation",level:3},{value:"<strong>Additional Architectural Principles</strong>",id:"additional-architectural-principles",level:3},{value:"\ud83d\udd27 System Architecture Overview",id:"-system-architecture-overview",level:2},{value:"<strong>High-Level Component Diagram</strong>",id:"high-level-component-diagram",level:3},{value:"<strong>Data Flow Architecture</strong>",id:"data-flow-architecture",level:3},{value:"\ud83d\udd0c Plugin System Architecture",id:"-plugin-system-architecture",level:2},{value:"<strong>Plugin Registry Implementation</strong>",id:"plugin-registry-implementation",level:3},{value:"<strong>Plugin Contract System</strong>",id:"plugin-contract-system",level:3},{value:"<strong>Plugin Metadata System</strong>",id:"plugin-metadata-system",level:3},{value:"\ud83c\udfed Pipeline Factory Pattern",id:"-pipeline-factory-pattern",level:2},{value:"\ud83d\udd04 Middleware Architecture",id:"-middleware-architecture",level:2},{value:"\ud83d\udcca Event System &amp; Observability",id:"-event-system--observability",level:2},{value:"\ud83d\udd12 Security Architecture",id:"-security-architecture",level:2},{value:"<strong>Plugin Sandboxing</strong>",id:"plugin-sandboxing",level:3},{value:"<strong>Configuration Security</strong>",id:"configuration-security",level:3},{value:"<strong>Network Security</strong>",id:"network-security",level:3},{value:"\ud83c\udfe2 Enterprise Architecture Components",id:"-enterprise-architecture-components",level:2},{value:"<strong>Dependency Injection Container</strong>",id:"dependency-injection-container",level:3},{value:"<strong>SLO Monitoring System</strong>",id:"slo-monitoring-system",level:3},{value:"<strong>External API Mocking Infrastructure</strong>",id:"external-api-mocking-infrastructure",level:3},{value:"\ud83d\ude80 Advanced AI Architecture",id:"-advanced-ai-architecture",level:2},{value:"<strong>Multi-Modal Processing Engine</strong>",id:"multi-modal-processing-engine",level:3},{value:"<strong>Federated Learning Coordinator</strong>",id:"federated-learning-coordinator",level:3},{value:"<strong>Adaptive Retrieval Engine</strong>",id:"adaptive-retrieval-engine",level:3},{value:"\ud83d\udd27 Enhanced Developer Tools",id:"-enhanced-developer-tools",level:2},{value:"<strong>CLI Doctor Diagnostics</strong>",id:"cli-doctor-diagnostics",level:3},{value:"<strong>Plugin Marketplace</strong>",id:"plugin-marketplace",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,i.jsx)(n.p,{children:"This comprehensive guide outlines the internal architecture of @DevilsDev/rag-pipeline-utils, emphasizing enterprise-grade modularity, plugin design patterns, and SOLID-compliant structure. Understanding this architecture is crucial for extending the system, creating custom plugins, and optimizing performance."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-core-design-philosophy",children:"\ud83c\udfd7\ufe0f Core Design Philosophy"}),"\n",(0,i.jsx)(n.p,{children:"The architecture is built on proven software engineering principles that ensure scalability, maintainability, and extensibility:"}),"\n",(0,i.jsx)(n.h3,{id:"solid-principles-implementation",children:(0,i.jsx)(n.strong,{children:"SOLID Principles Implementation"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Single Responsibility Principle (SRP)"}),": Each component handles one specific domain concern"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Loaders only handle document ingestion"}),"\n",(0,i.jsx)(n.li,{children:"Embedders only convert text to vectors"}),"\n",(0,i.jsx)(n.li,{children:"Retrievers only manage vector storage and search"}),"\n",(0,i.jsx)(n.li,{children:"LLMs only generate responses"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Open/Closed Principle (OCP)"}),": System is open for extension but closed for modification"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"New plugins can be added without changing core code"}),"\n",(0,i.jsx)(n.li,{children:"Plugin interfaces define stable contracts"}),"\n",(0,i.jsx)(n.li,{children:"Middleware can be injected without core changes"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Liskov Substitution Principle (LSP)"}),": Any plugin can be replaced with another of the same type"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All PDF loaders implement the same interface"}),"\n",(0,i.jsx)(n.li,{children:"OpenAI embedder can be swapped with Cohere embedder"}),"\n",(0,i.jsx)(n.li,{children:"Vector stores are interchangeable"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface Segregation Principle (ISP)"}),": Plugins only depend on interfaces they use"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Loaders don't depend on LLM interfaces"}),"\n",(0,i.jsx)(n.li,{children:"Embedders don't need retriever methods"}),"\n",(0,i.jsx)(n.li,{children:"Clean separation of concerns"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Dependency Inversion Principle (DIP)"}),": High-level modules don't depend on low-level modules"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pipeline depends on plugin abstractions, not implementations"}),"\n",(0,i.jsx)(n.li,{children:"Configuration drives dependency injection"}),"\n",(0,i.jsx)(n.li,{children:"Easy testing with mock implementations"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"additional-architectural-principles",children:(0,i.jsx)(n.strong,{children:"Additional Architectural Principles"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Plugin-Based Architecture"}),": Complete modularity with hot-swappable components"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Streaming-First Design"}),": Async flows with real-time, token-by-token output"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuration-Driven"}),": Environment-safe config via ",(0,i.jsx)(n.code,{children:".ragrc.json"})," files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Event-Driven Processing"}),": Comprehensive event system for monitoring and hooks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fail-Fast Validation"}),": Early error detection with detailed error messages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Observability Built-In"}),": Comprehensive logging, tracing, and metrics collection"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-system-architecture-overview",children:"\ud83d\udd27 System Architecture Overview"}),"\n",(0,i.jsx)(n.h3,{id:"high-level-component-diagram",children:(0,i.jsx)(n.strong,{children:"High-Level Component Diagram"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:'graph TB\r\n    subgraph "Application Layer"\r\n        CLI[CLI Interface]\r\n        API[Programmatic API]\r\n        Dashboard[Evaluation Dashboard]\r\n    end\r\n    \r\n    subgraph "Core Pipeline"\r\n        Factory[Pipeline Factory]\r\n        Registry[Plugin Registry]\r\n        Pipeline[RAG Pipeline]\r\n        Middleware[Middleware Stack]\r\n    end\r\n    \r\n    subgraph "Plugin Ecosystem"\r\n        Loaders[Document Loaders]\r\n        Embedders[Embedding Models]\r\n        Retrievers[Vector Stores]\r\n        LLMs[Language Models]\r\n        Rerankers[Context Rerankers]\r\n    end\r\n    \r\n    subgraph "Infrastructure"\r\n        Config[Configuration Manager]\r\n        Logger[Event Logger]\r\n        Metrics[Metrics Collector]\r\n        Cache[Caching Layer]\r\n    end\r\n    \r\n    CLI --\x3e Factory\r\n    API --\x3e Factory\r\n    Dashboard --\x3e API\r\n    \r\n    Factory --\x3e Registry\r\n    Factory --\x3e Pipeline\r\n    Pipeline --\x3e Middleware\r\n    \r\n    Registry --\x3e Loaders\r\n    Registry --\x3e Embedders\r\n    Registry --\x3e Retrievers\r\n    Registry --\x3e LLMs\r\n    Registry --\x3e Rerankers\r\n    \r\n    Pipeline --\x3e Config\r\n    Pipeline --\x3e Logger\r\n    Pipeline --\x3e Metrics\r\n    Pipeline --\x3e Cache\n'})}),"\n",(0,i.jsx)(n.h3,{id:"data-flow-architecture",children:(0,i.jsx)(n.strong,{children:"Data Flow Architecture"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\r\n    participant U as User\r\n    participant P as Pipeline\r\n    participant L as Loader\r\n    participant E as Embedder\r\n    participant R as Retriever\r\n    participant LLM as Language Model\r\n    participant Re as Reranker\r\n    \r\n    Note over U,Re: Document Ingestion Phase\r\n    U->>P: ingest(documents)\r\n    P->>L: load(document)\r\n    L->>P: chunks[]\r\n    P->>E: embed(chunks)\r\n    E->>P: embeddings[]\r\n    P->>R: store(embeddings)\r\n    R->>P: success\r\n    \r\n    Note over U,Re: Query Processing Phase\r\n    U->>P: query(prompt)\r\n    P->>E: embed(prompt)\r\n    E->>P: queryVector\r\n    P->>R: search(queryVector)\r\n    R->>P: candidates[]\r\n    P->>Re: rerank(candidates, prompt)\r\n    Re->>P: rankedContext[]\r\n    P->>LLM: generate(prompt, context)\r\n    LLM->>P: response\r\n    P->>U: answer + metadata\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-plugin-system-architecture",children:"\ud83d\udd0c Plugin System Architecture"}),"\n",(0,i.jsx)(n.h3,{id:"plugin-registry-implementation",children:(0,i.jsx)(n.strong,{children:"Plugin Registry Implementation"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"PluginRegistry"})," is the heart of the plugin system, managing plugin lifecycle and dependency injection:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Core plugin registry structure\r\nclass PluginRegistry {\r\n  private plugins: Map<string, Map<string, Plugin>> = new Map();\r\n  private contracts: Map<string, PluginContract> = new Map();\r\n  \r\n  register<T extends Plugin>(\r\n    type: PluginType, \r\n    name: string, \r\n    plugin: T,\r\n    metadata?: PluginMetadata\r\n  ): void {\r\n    // Validate plugin against contract\r\n    this.validateContract(type, plugin);\r\n    \r\n    // Register plugin with metadata\r\n    if (!this.plugins.has(type)) {\r\n      this.plugins.set(type, new Map());\r\n    }\r\n    this.plugins.get(type)!.set(name, plugin);\r\n    \r\n    // Emit registration event\r\n    this.eventEmitter.emit('plugin:registered', {\r\n      type, name, plugin, metadata\r\n    });\r\n  }\r\n  \r\n  get<T extends Plugin>(type: PluginType, name: string): T {\r\n    const typePlugins = this.plugins.get(type);\r\n    if (!typePlugins?.has(name)) {\r\n      throw new PluginNotFoundError(`Plugin ${type}:${name} not found`);\r\n    }\r\n    return typePlugins.get(name) as T;\r\n  }\r\n  \r\n  list(type?: PluginType): PluginInfo[] {\r\n    // Return available plugins with metadata\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"plugin-contract-system",children:(0,i.jsx)(n.strong,{children:"Plugin Contract System"})}),"\n",(0,i.jsx)(n.p,{children:"Each plugin type implements a strict contract interface:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Loader Plugin Contract\r\ninterface LoaderPlugin {\r\n  readonly metadata: PluginMetadata;\r\n  \r\n  load(source: string | Buffer, options?: LoaderOptions): Promise<Document[]>;\r\n  supports(mimeType: string): boolean;\r\n  validate(source: string | Buffer): Promise<ValidationResult>;\r\n}\r\n\r\n// Embedder Plugin Contract\r\ninterface EmbedderPlugin {\r\n  readonly metadata: PluginMetadata;\r\n  \r\n  embed(texts: string[], options?: EmbedderOptions): Promise<Embedding[]>;\r\n  embedSingle(text: string, options?: EmbedderOptions): Promise<Embedding>;\r\n  getDimensions(): number;\r\n  getMaxTokens(): number;\r\n}\r\n\r\n// Retriever Plugin Contract\r\ninterface RetrieverPlugin {\r\n  readonly metadata: PluginMetadata;\r\n  \r\n  store(embeddings: EmbeddingDocument[]): Promise<void>;\r\n  search(query: Embedding, options?: SearchOptions): Promise<SearchResult[]>;\r\n  delete(ids: string[]): Promise<void>;\r\n  getStats(): Promise<IndexStats>;\r\n}\r\n\r\n// LLM Plugin Contract\r\ninterface LLMPlugin {\r\n  readonly metadata: PluginMetadata;\r\n  \r\n  generate(prompt: string, context?: string[], options?: LLMOptions): AsyncIterable<string>;\r\n  generateSync(prompt: string, context?: string[], options?: LLMOptions): Promise<string>;\r\n  getTokenCount(text: string): number;\r\n  getMaxContextLength(): number;\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"plugin-metadata-system",children:(0,i.jsx)(n.strong,{children:"Plugin Metadata System"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface PluginMetadata {\r\n  name: string;\r\n  version: string;\r\n  description: string;\r\n  author: string;\r\n  license: string;\r\n  homepage?: string;\r\n  repository?: string;\r\n  keywords: string[];\r\n  \r\n  // Plugin-specific metadata\r\n  capabilities: string[];\r\n  requirements: {\r\n    node: string;\r\n    dependencies?: Record<string, string>;\r\n    environment?: string[];\r\n  };\r\n  \r\n  // Performance characteristics\r\n  performance: {\r\n    throughput?: string;\r\n    latency?: string;\r\n    memoryUsage?: string;\r\n  };\r\n  \r\n  // Configuration schema\r\n  configSchema?: JSONSchema;\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-pipeline-factory-pattern",children:"\ud83c\udfed Pipeline Factory Pattern"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"createRagPipeline"})," function implements the Factory pattern to create configured pipeline instances:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"export function createRagPipeline(config: PipelineConfig): RagPipeline {\r\n  // Initialize plugin registry\r\n  const registry = new PluginRegistry();\r\n  \r\n  // Register built-in plugins\r\n  registerBuiltinPlugins(registry);\r\n  \r\n  // Load custom plugins from config\r\n  if (config.plugins) {\r\n    await loadCustomPlugins(registry, config.plugins);\r\n  }\r\n  \r\n  // Resolve plugin instances\r\n  const loader = registry.get('loader', config.loader);\r\n  const embedder = registry.get('embedder', config.embedder);\r\n  const retriever = registry.get('retriever', config.retriever);\r\n  const llm = registry.get('llm', config.llm);\r\n  const reranker = config.useReranker ? \r\n    registry.get('reranker', config.reranker || 'default') : null;\r\n  \r\n  // Create middleware stack\r\n  const middleware = createMiddlewareStack(config.middleware || []);\r\n  \r\n  // Initialize pipeline with dependencies\r\n  return new RagPipeline({\r\n    loader,\r\n    embedder,\r\n    retriever,\r\n    llm,\r\n    reranker,\r\n    middleware,\r\n    config: config.pipelineConfig || {},\r\n    eventEmitter: new EventEmitter(),\r\n    logger: createLogger(config.logging || {}),\r\n    metrics: new MetricsCollector(config.metrics || {})\r\n  });\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-middleware-architecture",children:"\ud83d\udd04 Middleware Architecture"}),"\n",(0,i.jsx)(n.p,{children:"The middleware system allows for cross-cutting concerns like retry logic, caching, and monitoring:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Middleware interface\r\ninterface Middleware {\r\n  name: string;\r\n  priority: number;\r\n  \r\n  beforeLoad?(context: LoadContext): Promise<LoadContext>;\r\n  afterLoad?(context: LoadContext, result: Document[]): Promise<Document[]>;\r\n  \r\n  beforeEmbed?(context: EmbedContext): Promise<EmbedContext>;\r\n  afterEmbed?(context: EmbedContext, result: Embedding[]): Promise<Embedding[]>;\r\n  \r\n  beforeRetrieve?(context: RetrieveContext): Promise<RetrieveContext>;\r\n  afterRetrieve?(context: RetrieveContext, result: SearchResult[]): Promise<SearchResult[]>;\r\n  \r\n  beforeGenerate?(context: GenerateContext): Promise<GenerateContext>;\r\n  afterGenerate?(context: GenerateContext, result: string): Promise<string>;\r\n  \r\n  onError?(error: Error, context: any): Promise<void>;\r\n}\r\n\r\n// Built-in middleware examples\r\nclass RetryMiddleware implements Middleware {\r\n  constructor(private options: RetryOptions) {}\r\n  \r\n  async beforeGenerate(context: GenerateContext): Promise<GenerateContext> {\r\n    context.retryCount = 0;\r\n    context.maxRetries = this.options.maxRetries;\r\n    return context;\r\n  }\r\n  \r\n  async onError(error: Error, context: any): Promise<void> {\r\n    if (context.retryCount < context.maxRetries) {\r\n      context.retryCount++;\r\n      // Implement exponential backoff\r\n      await this.delay(Math.pow(2, context.retryCount) * 1000);\r\n      throw new RetryableError(error);\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\nclass CachingMiddleware implements Middleware {\r\n  constructor(private cache: Cache) {}\r\n  \r\n  async beforeEmbed(context: EmbedContext): Promise<EmbedContext> {\r\n    const cacheKey = this.generateCacheKey(context.texts);\r\n    const cached = await this.cache.get(cacheKey);\r\n    if (cached) {\r\n      context.cachedResult = cached;\r\n    }\r\n    return context;\r\n  }\r\n  \r\n  async afterEmbed(context: EmbedContext, result: Embedding[]): Promise<Embedding[]> {\r\n    if (!context.cachedResult) {\r\n      const cacheKey = this.generateCacheKey(context.texts);\r\n      await this.cache.set(cacheKey, result, { ttl: 3600 });\r\n    }\r\n    return context.cachedResult || result;\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-event-system--observability",children:"\ud83d\udcca Event System & Observability"}),"\n",(0,i.jsx)(n.p,{children:"The architecture includes a comprehensive event system for monitoring, debugging, and analytics:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Event types emitted by the system\r\ninterface PipelineEvents {\r\n  'pipeline:created': { config: PipelineConfig };\r\n  'pipeline:destroyed': { pipelineId: string };\r\n  \r\n  'document:loading': { source: string, loader: string };\r\n  'document:loaded': { source: string, chunks: number, duration: number };\r\n  'document:error': { source: string, error: Error };\r\n  \r\n  'embedding:started': { texts: number, embedder: string };\r\n  'embedding:completed': { embeddings: number, duration: number };\r\n  'embedding:cached': { texts: number, cacheHit: boolean };\r\n  \r\n  'retrieval:query': { query: string, retriever: string };\r\n  'retrieval:results': { results: number, duration: number };\r\n  \r\n  'generation:started': { prompt: string, llm: string };\r\n  'generation:token': { token: string, position: number };\r\n  'generation:completed': { response: string, duration: number, tokens: number };\r\n  \r\n  'error:handled': { error: Error, context: string, recovered: boolean };\r\n}\r\n\r\n// Event-driven metrics collection\r\nclass MetricsCollector {\r\n  constructor(private config: MetricsConfig) {\r\n    this.setupEventListeners();\r\n  }\r\n  \r\n  private setupEventListeners(): void {\r\n    // Track performance metrics\r\n    this.on('embedding:completed', (event) => {\r\n      this.histogram('embedding.duration', event.duration);\r\n      this.counter('embedding.requests').inc();\r\n    });\r\n    \r\n    this.on('generation:completed', (event) => {\r\n      this.histogram('generation.duration', event.duration);\r\n      this.histogram('generation.tokens', event.tokens);\r\n      this.counter('generation.requests').inc();\r\n    });\r\n    \r\n    // Track error rates\r\n    this.on('error:handled', (event) => {\r\n      this.counter('errors.total', {\r\n        context: event.context,\r\n        recovered: event.recovered.toString()\r\n      }).inc();\r\n    });\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-security-architecture",children:"\ud83d\udd12 Security Architecture"}),"\n",(0,i.jsx)(n.p,{children:"Security is built into the architecture at multiple levels:"}),"\n",(0,i.jsx)(n.h3,{id:"plugin-sandboxing",children:(0,i.jsx)(n.strong,{children:"Plugin Sandboxing"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Plugins run in isolated contexts with limited system access"}),"\n",(0,i.jsx)(n.li,{children:"API key management through secure configuration"}),"\n",(0,i.jsx)(n.li,{children:"Input validation and sanitization at plugin boundaries"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"configuration-security",children:(0,i.jsx)(n.strong,{children:"Configuration Security"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Encrypted storage of sensitive configuration data"}),"\n",(0,i.jsx)(n.li,{children:"Environment variable injection for secrets"}),"\n",(0,i.jsx)(n.li,{children:"Configuration schema validation"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"network-security",children:(0,i.jsx)(n.strong,{children:"Network Security"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"TLS/SSL enforcement for all external API calls"}),"\n",(0,i.jsx)(n.li,{children:"Request rate limiting and timeout handling"}),"\n",(0,i.jsx)(n.li,{children:"Secure credential rotation support"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-enterprise-architecture-components",children:"\ud83c\udfe2 Enterprise Architecture Components"}),"\n",(0,i.jsx)(n.h3,{id:"dependency-injection-container",children:(0,i.jsx)(n.strong,{children:"Dependency Injection Container"})}),"\n",(0,i.jsx)(n.p,{children:"The enterprise-grade dependency injection system provides IoC (Inversion of Control) for modular, testable architecture:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/core/dependency-injection.js\r\nclass DependencyContainer {\r\n  private services: Map<string, ServiceDefinition> = new Map();\r\n  private instances: Map<string, any> = new Map();\r\n  \r\n  register<T>(name: string, factory: ServiceFactory<T>, options?: ServiceOptions): void {\r\n    this.services.set(name, {\r\n      factory,\r\n      lifecycle: options?.lifecycle || 'singleton',\r\n      dependencies: options?.dependencies || []\r\n    });\r\n  }\r\n  \r\n  resolve<T>(name: string): T {\r\n    if (this.instances.has(name)) {\r\n      return this.instances.get(name);\r\n    }\r\n    \r\n    const service = this.services.get(name);\r\n    if (!service) {\r\n      throw new ServiceNotFoundError(`Service ${name} not registered`);\r\n    }\r\n    \r\n    // Resolve dependencies\r\n    const dependencies = service.dependencies.map(dep => this.resolve(dep));\r\n    \r\n    // Create instance\r\n    const instance = service.factory(...dependencies);\r\n    \r\n    if (service.lifecycle === 'singleton') {\r\n      this.instances.set(name, instance);\r\n    }\r\n    \r\n    return instance;\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"slo-monitoring-system",children:(0,i.jsx)(n.strong,{children:"SLO Monitoring System"})}),"\n",(0,i.jsx)(n.p,{children:"Built-in Service Level Objectives tracking with error budgets and alerting:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/observability/slo-monitor.js\r\nclass SLOMonitor {\r\n  private slos: Map<string, SLODefinition> = new Map();\r\n  private measurements: TimeSeriesDB = new TimeSeriesDB();\r\n  \r\n  defineSLO(name: string, definition: SLODefinition): void {\r\n    this.slos.set(name, {\r\n      ...definition,\r\n      errorBudget: this.calculateErrorBudget(definition)\r\n    });\r\n  }\r\n  \r\n  recordMeasurement(sloName: string, success: boolean, latency?: number): void {\r\n    const measurement = {\r\n      timestamp: Date.now(),\r\n      success,\r\n      latency,\r\n      slo: sloName\r\n    };\r\n    \r\n    this.measurements.record(measurement);\r\n    this.checkSLOViolation(sloName, measurement);\r\n  }\r\n  \r\n  getErrorBudgetStatus(sloName: string): ErrorBudgetStatus {\r\n    const slo = this.slos.get(sloName);\r\n    const recentMeasurements = this.measurements.getRecent(sloName, slo.window);\r\n    \r\n    return {\r\n      remaining: this.calculateRemainingBudget(slo, recentMeasurements),\r\n      burnRate: this.calculateBurnRate(recentMeasurements),\r\n      alerting: this.shouldAlert(slo, recentMeasurements)\r\n    };\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"external-api-mocking-infrastructure",children:(0,i.jsx)(n.strong,{children:"External API Mocking Infrastructure"})}),"\n",(0,i.jsx)(n.p,{children:"Deterministic test infrastructure with network simulation for reliable CI/CD:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// __tests__/mocks/external-apis.js\r\nclass ExternalAPIMocker {\r\n  private mocks: Map<string, MockDefinition> = new Map();\r\n  private networkSimulator: NetworkSimulator;\r\n  \r\n  mockAPI(service: string, config: MockConfig): void {\r\n    this.mocks.set(service, {\r\n      responses: config.responses,\r\n      latency: config.latency || { min: 100, max: 500 },\r\n      errorRate: config.errorRate || 0.05,\r\n      rateLimiting: config.rateLimiting\r\n    });\r\n  }\r\n  \r\n  async simulateRequest(service: string, request: APIRequest): Promise<APIResponse> {\r\n    const mock = this.mocks.get(service);\r\n    \r\n    // Simulate network conditions\r\n    await this.networkSimulator.delay(mock.latency);\r\n    \r\n    // Simulate errors\r\n    if (Math.random() < mock.errorRate) {\r\n      throw new MockNetworkError('Simulated network failure');\r\n    }\r\n    \r\n    // Return mock response\r\n    return this.generateResponse(mock, request);\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-advanced-ai-architecture",children:"\ud83d\ude80 Advanced AI Architecture"}),"\n",(0,i.jsx)(n.h3,{id:"multi-modal-processing-engine",children:(0,i.jsx)(n.strong,{children:"Multi-Modal Processing Engine"})}),"\n",(0,i.jsx)(n.p,{children:"Handle text, images, and structured data in unified pipelines:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/ai/multimodal/multi-modal-processor.js\r\nclass MultiModalProcessor {\r\n  private processors: Map<string, ModalityProcessor> = new Map();\r\n  \r\n  async process(input: MultiModalInput): Promise<ProcessedContent> {\r\n    const results = await Promise.all(\r\n      input.modalities.map(async (modality) => {\r\n        const processor = this.processors.get(modality.type);\r\n        return processor.process(modality.content, modality.metadata);\r\n      })\r\n    );\r\n    \r\n    return this.fuseResults(results, input.fusionStrategy);\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"federated-learning-coordinator",children:(0,i.jsx)(n.strong,{children:"Federated Learning Coordinator"})}),"\n",(0,i.jsx)(n.p,{children:"Distributed model training with privacy-preserving aggregation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/ai/federation/federated-learning-coordinator.js\r\nclass FederatedLearningCoordinator {\r\n  async coordinateTraining(participants: FederatedNode[]): Promise<GlobalModel> {\r\n    // Distribute training tasks\r\n    const localUpdates = await this.distributeTraining(participants);\r\n    \r\n    // Aggregate updates with differential privacy\r\n    const aggregatedUpdate = await this.aggregateWithPrivacy(localUpdates);\r\n    \r\n    // Update global model\r\n    return this.updateGlobalModel(aggregatedUpdate);\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"adaptive-retrieval-engine",children:(0,i.jsx)(n.strong,{children:"Adaptive Retrieval Engine"})}),"\n",(0,i.jsx)(n.p,{children:"Dynamic retrieval strategies with performance optimization:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/ai/retrieval/adaptive-retrieval-engine.js\r\nclass AdaptiveRetrievalEngine {\r\n  async adaptiveRetrieve(query: Query, context: RetrievalContext): Promise<RetrievalResult> {\r\n    // Analyze query complexity\r\n    const strategy = await this.selectStrategy(query, context);\r\n    \r\n    // Execute retrieval with chosen strategy\r\n    const results = await this.executeStrategy(strategy, query);\r\n    \r\n    // Learn from results for future optimization\r\n    await this.updateStrategyPerformance(strategy, results);\r\n    \r\n    return results;\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-enhanced-developer-tools",children:"\ud83d\udd27 Enhanced Developer Tools"}),"\n",(0,i.jsx)(n.h3,{id:"cli-doctor-diagnostics",children:(0,i.jsx)(n.strong,{children:"CLI Doctor Diagnostics"})}),"\n",(0,i.jsx)(n.p,{children:"Comprehensive system health checking and troubleshooting:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/cli/doctor-command.js\r\nclass DoctorCommand {\r\n  async runDiagnostics(): Promise<DiagnosticReport> {\r\n    const checks = [\r\n      this.checkNodeVersion(),\r\n      this.checkDependencies(),\r\n      this.checkConfiguration(),\r\n      this.checkPluginHealth(),\r\n      this.checkExternalServices(),\r\n      this.checkPerformanceBottlenecks()\r\n    ];\r\n    \r\n    const results = await Promise.allSettled(checks);\r\n    return this.generateReport(results);\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"plugin-marketplace",children:(0,i.jsx)(n.strong,{children:"Plugin Marketplace"})}),"\n",(0,i.jsx)(n.p,{children:"Certified plugin ecosystem with discovery and installation workflows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/core/plugin-marketplace/marketplace.js\r\nclass PluginMarketplace {\r\n  async discoverPlugins(criteria: SearchCriteria): Promise<PluginListing[]> {\r\n    const plugins = await this.searchRegistry(criteria);\r\n    return plugins.filter(plugin => this.meetsCertificationStandards(plugin));\r\n  }\r\n  \r\n  async installPlugin(pluginId: string): Promise<InstallationResult> {\r\n    // Verify plugin certification\r\n    await this.verifyCertification(pluginId);\r\n    \r\n    // Install with security scanning\r\n    return this.secureInstall(pluginId);\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["This enterprise-grade architecture enables @DevilsDev/rag-pipeline-utils to scale from simple prototypes to mission-critical production systems while maintaining flexibility, security, and observability. Continue to ",(0,i.jsx)(n.a,{href:"/rag-pipeline-utils/docs/Usage",children:"Usage"})," for practical implementation examples, or explore ",(0,i.jsx)(n.a,{href:"/rag-pipeline-utils/docs/Plugins",children:"Plugins"})," to learn about creating custom components."]})})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);