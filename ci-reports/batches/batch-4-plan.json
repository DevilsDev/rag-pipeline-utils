{
  "batchId": 4,
  "timestamp": "2025-08-12T13:36:15+12:00",
  "priority": "P1",
  "category": "Resource Management",
  "description": "Worker process leaks, async cleanup, open handles, and resource teardown issues",
  "targetFiles": [
    "__tests__/unit/streaming/streaming-integration.test.js",
    "__tests__/e2e/real-data-integration.test.js",
    "__tests__/integration/dag/dag-execution.test.js",
    "src/core/dag/dag-engine.js",
    "src/streaming/streaming-coordinator.js",
    "__tests__/utils/test-helpers.js",
    "__tests__/setup/test-global-setup.js",
    "__tests__/setup/test-global-teardown.js"
  ],
  "estimatedTests": 25,
  "expectedIssues": [
    "Worker processes not properly terminated after tests",
    "Async operations continuing after test completion",
    "Open file handles preventing test cleanup",
    "Streaming connections not closed in teardown",
    "DAG execution context not cleaned up",
    "Jest open handles warnings",
    "Memory leaks in long-running test suites"
  ],
  "fixPatterns": [
    "asyncCleanup",
    "workerTermination", 
    "handleCleanup",
    "streamingTeardown",
    "resourceManagement"
  ],
  "allowedFixes": [
    "Add proper afterEach/afterAll cleanup in test files",
    "Implement worker process termination in streaming tests",
    "Add timeout and cleanup for DAG execution contexts",
    "Close streaming connections and file handles explicitly",
    "Add Jest detectOpenHandles configuration",
    "Implement resource tracking and cleanup utilities"
  ],
  "guardrails": {
    "maxRegressions": 0,
    "maxRetries": 2,
    "rollbackOnFailure": true,
    "requireNetDecrease": true
  },
  "baseline": {
    "totalTests": 556,
    "failedTests": 213,
    "passRate": 61.7,
    "failedSuites": 34
  },
  "dependsOn": "batch-3"
}
