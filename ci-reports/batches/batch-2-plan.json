{
  "batchId": 2,
  "timestamp": "2025-08-10T22:54:11+12:00",
  "priority": "P1",
  "category": "Async/Timing Issues",
  "description": "Async/await patterns, timing issues, streaming, and concurrency problems",
  "targetFiles": [
    "__tests__/unit/streaming/llm-streaming.test.js",
    "__tests__/integration/streaming-pipeline.test.js", 
    "__tests__/unit/plugins/plugin-registry.test.js",
    "__tests__/unit/cli/enhanced-cli.test.js",
    "__tests__/unit/performance/benchmark.test.js",
    "__tests__/unit/observability/event-logger.test.js",
    "__tests__/integration/pipeline-integration.test.js"
  ],
  "estimatedTests": 25,
  "expectedIssues": [
    "Streaming/backpressure timing in llm-streaming tests",
    "Benchmarks with brittle absolute time thresholds",
    "Event ordering/race conditions in observability",
    "DAG timing edges (timeouts/resume checkpoints)",
    "Plugin registry async coordination",
    "CLI command async execution patterns"
  ],
  "fixPatterns": [
    "event_driven_waits",
    "benchmark_relative_assertions", 
    "explicit_test_timeouts",
    "debounce_flush_logic"
  ],
  "allowedFixes": [
    "Replace setTimeout waits with event-driven waits (stream.once('end'), await once(emitter, 'done'))",
    "Benchmarks: assert order/upper-bound, not exact ms (>= 0 && <= expectedMax)",
    "Add explicit per-test timeouts where logic needs headroom",
    "Debounce/flush: wait for final state/event rather than fixed milliseconds"
  ],
  "guardrails": {
    "maxRegressions": 0,
    "maxRetries": 2,
    "rollbackOnFailure": true,
    "requireNetDecrease": true
  },
  "baseline": {
    "totalTests": 446,
    "failedTests": 140,
    "passRate": 68.6,
    "failedSuites": 38
  },
  "dependsOn": "batch-1"
}
